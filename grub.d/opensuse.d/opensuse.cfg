for version in Leap-42.2 Tumbleweed; do
   for medium in DVD GNOME-Live KDE-Live NET Rescue-CD; do
     for arch in x86_64 i586 i686; do      
       if [ -e $isopath/openSUSE-$version-$medium-$arch-*.iso ]; then
         for isofile in $isopath/openSUSE-$version-$medium-$arch-*.iso; do
           title="Boot $version $medium ($arch)"
            
           if [ "${medium}" = "DVD" ]; then
             title="Install $version ($arch)"
           fi

           if [ "${medium}" = "NET" ]; then
             title="Install $version ($arch)"
           fi

           regexp --set=isoname "$isopath/(.*)" "$isofile"
           submenu "$isoname ->" "$isofile" "$arch" "$title" "$medium" {
             iso_path="$2"
             boot_dir="$3"
             title="$4"
             medium="$5"
             loopback loop "$iso_path"
                         
             if [ "${medium}" = "KDE-Live" ]; then
               source $prefix/grub.d/opensuse.d/opensuse_live.inc
             else
               if [ "${medium}" = "Rescue-CD" ]; then
                 source $prefix/grub.d/opensuse.d/opensuse_rescue.inc
               else
                 source $prefix/grub.d/opensuse.d/opensuse_install.inc
               fi
             fi
           }
         done
      fi
    done
  done
done
